<script>
fetch('albums.json')
  .then(response => response.json())
  .then(data => {
    const ctx = document.getElementById('lossChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.map(d => d.album),
        datasets: [{
          label: 'Loss',
          data: data.map(d => d.loss),
          borderColor: '#3e95cd',
          fill: false,
          tension: 0.1,
          pointBackgroundColor: '#3e95cd',
          pointRadius: 6
        }]
      },
      options: {
        onClick: (e, elements) => {
          if (elements.length > 0) {
            const index = elements[0].index;
            const album = data[index];
            const albumPage = album.album.toLowerCase().replace(/ /g, '-') + '.html';
            window.location.href = albumPage;
          }
        }
      }
    });
  });
</script>
